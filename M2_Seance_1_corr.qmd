---
title: "Séance 1"
format: html
editor: visual
editor_options: 
  chunk_output_type: console
---

## Les données PISA

## Enquête PISA

Dans l'enquête PISA, les compétences en mathématiques expriment l'aptitude des élèves de 15 ans à formuler, employer et interpréter des mathématiques dans de multiples contextes, pour décrire, expliquer et prévoir des phénomènes, en comprenant le rôle que les mathématiques jouent dans le monde.

Les compétences à l'écrit expriment la capacité de comprendre, d'utiliser et d'interpréter des textes écrits en vue de réaliser ses objectifs, développer ses connaissances et son potentiel et prendre une part active dans la société. L'indicateur utilisé est le score moyen.

Le statut socio-économique, ou plus précisément le statut économique, social et culturel de l'élève (ESCS) est un indice composite composé à partir de trois indices : le statut socioprofessionnel des parents (basé sur les métiers exercés par les parents), le niveau de formation (nombre d'années d'études) des parents, ainsi que le patrimoine familial. Ce dernier indice inclut lui-même un grand nombre de variables parmi lesquelles les ressources culturelles disponibles dans le foyer (livres), les ressources éducatives (un endroit calme pour travailler, des ouvrages de références ou des logiciels éducatifs) ainsi que d'autres ressources (voiture, connexion internet. . .)

```{r}
library(tidyverse)
library(questionr)

pisa <- readRDS("data/pisa.RDS")
```

## La corrélation entre les scores
### Fonction

La fonction `cor` permet de calculer la corrélation entre deux variables quantitatives.

```{r}
# La corrélation de la longueur et de la largeur des pétales du jeu de données d'exemple iris 
data(iris)
cor(iris$Petal.Length, iris$Petal.Width)
```

Pour obtenir la version pondérée du coefficient de corrélation, il faut quelques étapes supplémentaires en R de base. Certains packages proposent des fonctions clefs en main.

```{r}
# Création de poids aléatoires pour l'exemple
iris$poids <- sample.int(dim(iris)[1])

# Chargement du package et calcul de la pondération
library(weights)
wtd.cor(iris$Petal.Length, iris$Petal.Width, weight = iris$poids)
```

### Exercice

1.  Utilisez la fonction `summary` pour décrire la distribution du score de compréhension écrite `score_compecr` et en mathématiques `score_maths`

```{r}
summary(pisa$score_compecr)
summary(pisa$score_maths)
```

Réponse :

2.  Construisez un nuage de points pour représenter graphiquement le lien entre ces deux variables. Commentez.

```{r}
ggplot(pisa) +
  geom_point(aes(x = score_compecr,
                 y = score_maths))
```

3.  Calculez le coefficient de corrélation non pondéré entre le score de compréhension écrite et le score de compréhension orale. Écrivez une phrase de lecture.

```{r}
cor(pisa$score_compecr, pisa$score_maths)
```

Réponse :

4.  Calculez le coefficient de corrélation pondéré entre le score de compréhension écrite et le score de compréhension orale. Écrivez une phrase de lecture.

```{r}
wtd.cor(pisa$score_compecr, pisa$score_maths, weight = pisa$poids)
```

Réponse :

5.  Chez les garçons et chez les filles, calculez le coefficient de corrélation pondéré entre le score de compréhension écrite et le score de compréhension orale . Écrivez une phrase de lecture.

```{r}
pisa_f <- filter(pisa, sexe == "Fille")
pisa_g <- filter(pisa, sexe == "Garçon")

wtd.cor(pisa_f$score_compecr, pisa_f$score_maths, weight = pisa_f$poids)
wtd.cor(pisa_g$score_compecr, pisa_g$score_maths, weight = pisa_g$poids)
```

Réponse :
